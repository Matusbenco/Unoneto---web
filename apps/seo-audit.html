<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SEO & Web Inšpektor | Unoneto</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;500;700;800&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        body { font-family: 'Inter', sans-serif; background-color: #0f172a; color: #f8fafc; }
        
        .glass-panel {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 16px;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.3);
        }

        .btn-gradient {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            transition: all 0.3s;
        }
        .btn-gradient:hover {
            filter: brightness(1.1); transform: translateY(-2px);
            box-shadow: 0 10px 20px -10px rgba(16, 185, 129, 0.3);
        }

        /* PREVIEWS */
        .google-preview { font-family: Arial, sans-serif; background: white; color: #3c4043; padding: 20px; border-radius: 12px; }
        .g-link { color: #202124; font-size: 14px; display: flex; align-items: center; gap: 8px; margin-bottom: 5px; }
        .g-title { color: #1a0dab; font-size: 20px; text-decoration: none; display: block; margin-bottom: 2px;}
        .g-title:hover { text-decoration: underline; }
        .g-desc { color: #4d5156; font-size: 14px; line-height: 1.58; }

        .fb-preview { font-family: Helvetica, Arial, sans-serif; background: #f0f2f5; border-radius: 8px; overflow: hidden; border: 1px solid #ddd; max-width: 500px; margin: 0 auto; }
        .fb-img-container { width: 100%; height: 260px; background: #ddd; position: relative; overflow: hidden; }
        .fb-img { width: 100%; height: 100%; object-fit: cover; }
        .fb-content { padding: 10px 12px; background: #f0f2f5; border-top: 1px solid #ddd; }
        .fb-domain { text-transform: uppercase; color: #65676b; font-size: 12px; margin-bottom: 5px; }
        .fb-title { color: #050505; font-weight: 600; font-size: 16px; line-height: 1.2; margin-bottom: 3px; }
        .fb-desc { color: #65676b; font-size: 13px; line-height: 1.3; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }

        /* SCORE CIRCLE */
        .score-circle {
            width: 90px; height: 90px; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-size: 2rem; font-weight: 800; color: white;
            background: conic-gradient(var(--score-color) var(--score-percent), #334155 0);
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
            position: relative;
        }
        .score-circle::before {
            content: ''; position: absolute; width: 75px; height: 75px;
            background: #1e293b; border-radius: 50%;
        }
        .score-val { position: relative; z-index: 2; }

        /* TAGS & STATS */
        .stat-card { background: rgba(255,255,255,0.05); padding: 10px; border-radius: 8px; text-align: center; }
        .stat-val { font-size: 1.2rem; font-weight: bold; color: white; display: block; }
        .stat-lbl { font-size: 0.7rem; color: #94a3b8; text-transform: uppercase; }

        .keyword-tag { background: rgba(255,255,255,0.1); padding: 4px 10px; border-radius: 20px; font-size: 0.8rem; color: #cbd5e1; border: 1px solid rgba(255,255,255,0.1); }
        .social-tag { display: inline-flex; align-items: center; gap: 5px; padding: 5px 10px; border-radius: 6px; font-size: 0.8rem; font-weight: bold; margin-right: 5px; margin-bottom: 5px;}
        .soc-fb { background: #1877F2; color: white; }
        .soc-ig { background: #E1306C; color: white; }
        .soc-li { background: #0077b5; color: white; }
        .soc-tt { background: #000000; color: white; border: 1px solid #333; }
        .soc-yt { background: #FF0000; color: white; }

        .status-dot { width: 10px; height: 10px; border-radius: 50%; display: inline-block; margin-right: 8px; flex-shrink: 0; }
        .dot-green { background: #10b981; box-shadow: 0 0 8px #10b981; }
        .dot-red { background: #ef4444; box-shadow: 0 0 8px #ef4444; }
        .dot-orange { background: #f59e0b; box-shadow: 0 0 8px #f59e0b; }

        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #0f172a; }
        ::-webkit-scrollbar-thumb { background: #334155; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #475569; }
    </style>
</head>
<body class="min-h-screen flex flex-col">

    <header class="h-20 border-b border-slate-700 flex items-center justify-between px-6 lg:px-10 shrink-0 bg-slate-900/90 backdrop-blur z-50">
        <div class="flex items-center gap-3">
            <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-emerald-500 to-teal-600 flex items-center justify-center text-white text-xl shadow-lg shadow-emerald-500/20">
                <i class="fa-solid fa-magnifying-glass-chart"></i>
            </div>
            <div>
                <h1 class="font-outfit font-bold text-xl tracking-tight text-white">SEO <span class="text-emerald-500">Inšpektor</span></h1>
                <p class="text-xs text-slate-400">Analýza webov a e-shopov</p>
            </div>
        </div>
        <a href="index.html" class="text-slate-400 hover:text-white transition font-medium flex items-center gap-2 text-sm bg-slate-800 px-4 py-2 rounded-lg border border-slate-700 hover:border-slate-500">
            <i class="fa-solid fa-arrow-left"></i> Späť
        </a>
    </header>

    <main class="flex-1 w-full max-w-7xl mx-auto p-6 flex flex-col gap-8">

        <div class="glass-panel p-8 text-center relative overflow-hidden group">
            <div class="absolute inset-0 bg-gradient-to-b from-emerald-500/5 to-transparent opacity-50"></div>
            <div class="relative z-10 max-w-2xl mx-auto">
                <h2 class="text-2xl font-bold text-white mb-2">Skontroluj webstránku</h2>
                <p class="text-slate-400 mb-6 text-sm">Zadaj ľubovoľnú adresu (napr. bosakandrej.sk) a získaj okamžitý audit.</p>
                <div class="flex gap-2">
                    <input type="text" id="urlInput" placeholder="zadaj-domenu.sk" class="flex-1 bg-slate-900 border border-slate-700 text-white rounded-xl px-5 py-4 focus:outline-none focus:border-emerald-500 transition shadow-inner font-mono">
                    <button onclick="analyzeUrl()" class="btn-gradient text-white font-bold px-8 rounded-xl flex items-center gap-2">
                        <i class="fa-solid fa-rocket"></i> Spustiť
                    </button>
                </div>
                <p id="errorMsg" class="text-red-400 text-xs mt-3 hidden"></p>
            </div>
        </div>

        <div id="resultsArea" class="hidden grid grid-cols-1 lg:grid-cols-12 gap-6">
            
            <div class="lg:col-span-7 space-y-6">
                
                <div class="glass-panel p-6 border-l-4 border-emerald-500">
                    <div class="flex flex-col sm:flex-row items-center gap-6">
                        <div class="flex flex-col items-center">
                            <div class="score-circle" id="scoreCircle" style="--score-color: #10b981; --score-percent: 0%;">
                                <span class="score-val" id="scoreVal">0</span>
                            </div>
                            <span class="text-xs font-bold text-slate-400 uppercase mt-2">Celkové Skóre</span>
                        </div>
                        
                        <div class="flex-1 grid grid-cols-2 sm:grid-cols-4 gap-3 w-full">
                            <div class="stat-card">
                                <span class="stat-val text-blue-400" id="statWords">0</span>
                                <span class="stat-lbl">Slov</span>
                            </div>
                            <div class="stat-card">
                                <span class="stat-val text-purple-400" id="statLinks">0</span>
                                <span class="stat-lbl">Odkazov</span>
                            </div>
                            <div class="stat-card">
                                <span class="stat-val text-orange-400" id="statImages">0</span>
                                <span class="stat-lbl">Obrázkov</span>
                            </div>
                            <div class="stat-card">
                                <span class="stat-val text-pink-400" id="statHtags">0</span>
                                <span class="stat-lbl">Nadpisov</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="glass-panel p-6">
                    <h3 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-4">Technický Audit</h3>
                    <div class="space-y-3" id="auditList"></div>
                </div>

                <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
                    <div class="glass-panel p-6">
                        <h3 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-4">Kľúčové slová</h3>
                        <div class="flex flex-wrap gap-2" id="keywordList"></div>
                    </div>
                    <div class="glass-panel p-6">
                        <h3 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-4">Detekované Sociálne siete</h3>
                        <div id="socialList" class="flex flex-wrap gap-2">
                            <span class="text-slate-500 text-xs italic">Žiadne prepojenia sa nenašli.</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="lg:col-span-5 space-y-6">
                
                <div class="glass-panel p-6 bg-gradient-to-br from-slate-800 to-slate-900 border border-slate-700">
                    <h3 class="text-sm font-bold text-white mb-3 flex items-center gap-2">
                        <i class="fa-solid fa-user-doctor text-emerald-400"></i> Názor Inšpektora
                    </h3>
                    <p class="text-slate-300 text-sm leading-relaxed italic" id="aiVerdict">
                        Prebieha analýza webu...
                    </p>
                </div>

                <div class="space-y-4">
                    <div class="glass-panel p-5">
                        <h3 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-3"><i class="fa-brands fa-google text-blue-500"></i> Ako to vidí Google</h3>
                        <div class="google-preview">
                            <div class="g-link">
                                <img id="gFavicon" src="" class="w-4 h-4 rounded-full hidden">
                                <div class="flex flex-col">
                                    <span id="gDomain" class="font-bold text-xs">domena.sk</span>
                                    <span id="gUrl" class="text-gray-500 text-[10px]">https://domena.sk</span>
                                </div>
                            </div>
                            <a href="#" class="g-title" id="gTitle">Titulok stránky</a>
                            <div class="g-desc" id="gDesc">Popis stránky...</div>
                        </div>
                    </div>

                    <div class="glass-panel p-5">
                        <h3 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-3"><i class="fa-brands fa-facebook text-blue-600"></i> Ako to vidí Facebook</h3>
                        <div class="fb-preview">
                            <div class="fb-img-container">
                                <img id="fbImg" src="" class="fb-img hidden" referrerpolicy="no-referrer">
                                <div id="fbNoImg" class="flex items-center justify-center h-full text-gray-400 text-sm bg-gray-300">
                                    <i class="fa-regular fa-image text-2xl mr-2"></i> Bez náhľadu
                                </div>
                            </div>
                            <div class="fb-content">
                                <div class="fb-domain" id="fbDomain">DOMENA.SK</div>
                                <div class="fb-title" id="fbTitle">Titulok odkazu</div>
                                <div class="fb-desc" id="fbDesc">Krátky popis...</div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

            <div class="lg:col-span-12 glass-panel p-8 mt-4 flex flex-col md:flex-row items-center justify-between gap-6 border-t border-slate-700/50">
                <div class="max-w-2xl">
                    <h3 class="font-bold text-white mb-1">Potrebujete vylepšiť svoj web?</h3>
                    <p class="text-slate-400 text-sm">
                        Zelené čísla sú super, ale reálny predaj robí kvalitný obsah a stratégia.
                    </p>
                </div>
                <a href="mailto:info@unoneto.sk" class="bg-white text-slate-900 px-6 py-3 rounded-xl font-bold hover:bg-emerald-50 transition shadow-lg flex items-center gap-2 whitespace-nowrap">
                    <i class="fa-regular fa-envelope"></i> Ozvite sa nám
                </a>
            </div>

        </div>

    </main>

<script>
    async function analyzeUrl() {
        const input = document.getElementById('urlInput');
        let url = input.value.trim();
        const err = document.getElementById('errorMsg');
        const results = document.getElementById('resultsArea');

        if (!url) return;

        // --- 1. INTELIGENTNÁ OPRAVA URL ---
        // Odstráni medzery, opraví "www", doplní protokol
        url = url.replace(/\s/g, ''); 
        if (!/^https?:\/\//i.test(url)) {
            url = 'https://' + url;
        }
        
        // UI Reset
        err.classList.add('hidden');
        results.classList.add('hidden');
        input.disabled = true;
        document.body.style.cursor = 'wait';

        try {
            const proxyUrl = `https://api.allorigins.win/get?url=${encodeURIComponent(url)}`;
            const response = await fetch(proxyUrl);
            const data = await response.json();

            if (!data.contents) throw new Error("Stránku sa nepodarilo načítať (blokuje botov alebo neexistuje).");

            const parser = new DOMParser();
            const doc = parser.parseFromString(data.contents, "text/html");

            // --- 2. ZBER DÁT ---
            const meta = {
                title: doc.querySelector('title')?.innerText || "",
                desc: doc.querySelector('meta[name="description"]')?.getAttribute('content') || "",
                h1: doc.querySelector('h1')?.innerText || "",
                h2s: doc.querySelectorAll('h2').length,
                h3s: doc.querySelectorAll('h3').length,
                ogTitle: doc.querySelector('meta[property="og:title"]')?.getAttribute('content') || "",
                ogDesc: doc.querySelector('meta[property="og:description"]')?.getAttribute('content') || "",
                ogImage: doc.querySelector('meta[property="og:image"]')?.getAttribute('content') || "",
                canonical: doc.querySelector('link[rel="canonical"]')?.getAttribute('href') || "",
                favicon: `https://www.google.com/s2/favicons?domain=${url}&sz=64`,
                domain: new URL(url).hostname,
                images: Array.from(doc.querySelectorAll('img')),
                links: Array.from(doc.querySelectorAll('a')),
                bodyText: doc.body.innerText
            };

            // Fix Facebook Image (absolútna cesta)
            if (!meta.ogImage) {
                const firstImg = doc.querySelector('img[src^="http"], img[src^="/"]');
                if (firstImg) meta.ogImage = firstImg.getAttribute('src');
            }
            if (meta.ogImage && !meta.ogImage.startsWith('http')) {
                const origin = new URL(url).origin;
                const path = meta.ogImage.startsWith('/') ? meta.ogImage : '/' + meta.ogImage;
                meta.ogImage = origin + path;
            }

            // --- 3. VYKRESLENIE ---
            updatePreviews(meta, url);
            updateStats(meta);
            analyzeKeywords(meta.bodyText);
            detectSocials(doc);
            calculateScoreAndAudit(meta);

            results.classList.remove('hidden');

        } catch (e) {
            err.innerText = "Chyba: " + e.message;
            err.classList.remove('hidden');
            console.error(e);
        } finally {
            input.disabled = false;
            document.body.style.cursor = 'default';
        }
    }

    function updatePreviews(meta, url) {
        // Google
        document.getElementById('gTitle').innerText = truncate(meta.title, 60);
        document.getElementById('gDesc').innerText = truncate(meta.desc, 155) || "Bez popisu...";
        document.getElementById('gDomain').innerText = meta.domain;
        document.getElementById('gUrl').innerText = url;
        document.getElementById('gFavicon').src = meta.favicon;
        document.getElementById('gFavicon').classList.remove('hidden');

        // Facebook
        document.getElementById('fbTitle').innerText = truncate(meta.ogTitle || meta.title, 80);
        document.getElementById('fbDesc').innerText = truncate(meta.ogDesc || meta.desc, 100);
        document.getElementById('fbDomain').innerText = meta.domain.toUpperCase();
        
        const fbImgEl = document.getElementById('fbImg');
        const fbNoImgEl = document.getElementById('fbNoImg');
        
        if (meta.ogImage) {
            fbImgEl.src = meta.ogImage;
            fbImgEl.classList.remove('hidden');
            fbNoImgEl.classList.add('hidden');
        } else {
            fbImgEl.classList.add('hidden');
            fbNoImgEl.classList.remove('hidden');
        }
    }

    function updateStats(meta) {
        const words = meta.bodyText.split(/\s+/).filter(w => w.length > 0).length;
        document.getElementById('statWords').innerText = formatNumber(words);
        document.getElementById('statLinks').innerText = meta.links.length;
        document.getElementById('statImages').innerText = meta.images.length;
        document.getElementById('statHtags').innerText = (meta.h2s + meta.h3s);
    }

    function calculateScoreAndAudit(meta) {
        const list = document.getElementById('auditList');
        const verdictEl = document.getElementById('aiVerdict');
        list.innerHTML = '';

        let score = 0;
        let checks = 0;
        let issues = [];

        const addCheck = (label, isOk, msg, weight = 1, failMsg = null) => {
            checks += weight;
            if (isOk) score += weight;
            else if (failMsg) issues.push(failMsg);

            const color = isOk ? 'dot-green' : 'dot-red';
            const textCol = isOk ? 'text-slate-300' : 'text-orange-300';
            
            list.innerHTML += `
                <div class="flex items-center justify-between border-b border-slate-700/50 pb-2 last:border-0">
                    <div class="flex items-center">
                        <span class="status-dot ${color}"></span>
                        <span class="font-bold text-sm text-white">${label}</span>
                    </div>
                    <span class="text-xs ${textCol} text-right max-w-[150px]">${msg}</span>
                </div>
            `;
        };

        // 1. Titulok
        const tLen = meta.title.length;
        if (tLen === 0) addCheck("Titulok (Title)", false, "Chýba!", 3, "Web nemá žiadny titulok pre vyhľadávače.");
        else if (tLen < 15) addCheck("Titulok (Title)", false, "Príliš krátky", 2, "Titulok je príliš krátky.");
        else if (tLen > 70) addCheck("Titulok (Title)", false, "Príliš dlhý", 2, "Titulok je príliš dlhý (Google ho odsekne).");
        else addCheck("Titulok (Title)", true, "Optimálna dĺžka ✅", 2);

        // 2. Popis
        const dLen = meta.desc.length;
        if (dLen === 0) addCheck("Meta Popis", false, "Chýba!", 3, "Chýba meta popis, ktorý láka na kliknutie.");
        else if (dLen < 70) addCheck("Meta Popis", false, "Príliš stručný", 2, "Popis je príliš krátky.");
        else if (dLen > 165) addCheck("Meta Popis", false, "Príliš dlhý", 2, "Popis je dlhý.");
        else addCheck("Meta Popis", true, "Perfektné ✅", 2);

        // 3. Nadpisy
        if (meta.h1.length > 0) addCheck("Nadpis H1", true, "Nájdený ✅", 3);
        else addCheck("Nadpis H1", false, "Chýba hlavný nadpis", 3, "Chýba hlavný nadpis H1.");

        if (meta.h2s > 0) addCheck("Štruktúra (H2)", true, `${meta.h2s} podnadpisov`, 1);
        else addCheck("Štruktúra (H2)", false, "Web je bez štruktúry", 1, "Text nie je členený podnadpismi H2.");

        // 4. Synergia
        if (meta.title && meta.h1) {
            const tWords = meta.title.toLowerCase().split(/\s+/);
            const h1Words = meta.h1.toLowerCase().split(/\s+/);
            const match = tWords.some(w => w.length > 3 && h1Words.includes(w));
            if (match) addCheck("Kľúčové slovo", true, "Je v Title aj H1 ✅", 2);
            else addCheck("Kľúčové slovo", false, "Nezhoda Title a H1", 2, "Hlavné kľúčové slovo nie je v nadpise aj titulku.");
        }

        // 5. Obsah
        const wCount = meta.bodyText.split(/\s+/).length;
        if (wCount < 300) addCheck("Dĺžka textu", false, "Málo textu (<300 slov)", 2, "Stránka má veľmi málo textového obsahu.");
        else addCheck("Dĺžka textu", true, "Dostatočný obsah ✅", 1);

        // 6. Obrázky
        if (meta.images.length > 0) {
            const missingAlt = meta.images.filter(img => !img.alt).length;
            if (missingAlt === 0) addCheck("Obrázky ALT", true, "Všetky majú popis ✅", 1);
            else if (missingAlt < meta.images.length / 2) addCheck("Obrázky ALT", true, `Chýba pri ${missingAlt} obr.`, 1);
            else addCheck("Obrázky ALT", false, "Väčšina bez popisu", 1, "Obrázkom chýbajú textové popisy (ALT).");
        }

        // 7. Social
        if (meta.ogImage) addCheck("Sociálne siete", true, "Náhľad pripravený ✅", 1);
        else addCheck("Sociálne siete", false, "Chýba obrázok", 1, "Pri zdieľaní na FB/IG sa nezobrazí pekný obrázok.");

        // SKÓRE & VERDIKT
        const finalScore = Math.round((score / checks) * 100);
        const scoreEl = document.getElementById('scoreVal');
        const circle = document.getElementById('scoreCircle');
        
        animateValue(scoreEl, 0, finalScore, 1000);
        
        let scoreColor = '#ef4444'; 
        if (finalScore > 60) scoreColor = '#f59e0b';
        if (finalScore > 85) scoreColor = '#10b981';
        
        circle.style.setProperty('--score-color', scoreColor);
        circle.style.setProperty('--score-percent', `${finalScore}%`);

        // GENERÁCIA NÁZORU
        let verdict = "";
        if (finalScore > 90) verdict = "Excelentný výsledok! Tento web je technicky výborne pripravený. Udržujte kvalitu obsahu.";
        else if (finalScore > 70) verdict = "Veľmi dobrý základ. Web je funkčný a čitateľný, no má drobné nedostatky v meta dátach alebo štruktúre.";
        else if (finalScore > 40) verdict = "Priemerný web. Návštevníci môžu byť zmätení, ak nevidia jasný popis vo vyhľadávači. Odporúčam doplniť meta tagy a nadpisy.";
        else verdict = "Web potrebuje urgentnú pomoc. Chýbajú základné prvky (Titulok, H1, Popis), čo výrazne poškodzuje viditeľnosť na Google.";

        if (issues.length > 0) {
            verdict += "<br><br><span class='text-orange-300 font-bold'>Kritické chyby:</span> " + issues.slice(0, 2).join(", ") + ".";
        }

        verdictEl.innerHTML = verdict;
    }

    function analyzeKeywords(text) {
        if (!text) return;
        const cleanText = text.toLowerCase().replace(/[^\w\s\u00C0-\u017F]/g, '');
        const words = cleanText.split(/\s+/);
        const stopWords = ['a', 'v', 's', 'z', 'o', 'u', 'k', 'na', 'do', 'po', 'pri', 'pre', 'za', 'zo', 'bez', 'od', 'ja', 'ty', 'on', 'ona', 'ono', 'my', 'vy', 'oni', 'ony', 'to', 'si', 'sa', 'je', 'som', 'sme', 'sú', 'bol', 'bola', 'bolo', 'boli', 'bude', 'budú', 'by', 'aby', 'keď', 'kde', 'kto', 'čo', 'ako', 'tak', 'ale', 'lebo', 'že', 'či', 'aj', 'ani', 'len', 'už', 'ešte', 'viac', 'mám', 'máš', 'má', 'máme', 'máte', 'majú', 'eur', 'dph', 'cena', 'košík', 'menu', 'search', 'hľadať', 'kontakt', 'domov', 'produkt', 'obchod', 'pridať'];

        const counts = {};
        words.forEach(w => {
            if (w.length > 3 && !stopWords.includes(w) && !/^\d+$/.test(w)) {
                counts[w] = (counts[w] || 0) + 1;
            }
        });

        const sorted = Object.entries(counts).sort((a, b) => b[1] - a[1]).slice(0, 10);
        const container = document.getElementById('keywordList');
        container.innerHTML = '';
        
        sorted.forEach(([word, count]) => {
            container.innerHTML += `<span class="keyword-tag">${word} <span class="keyword-count">${count}x</span></span>`;
        });
    }

    function detectSocials(doc) {
        const socialMap = {
            'facebook.com': { name: 'Facebook', cls: 'soc-fb', icon: 'fa-facebook' },
            'instagram.com': { name: 'Instagram', cls: 'soc-ig', icon: 'fa-instagram' },
            'linkedin.com': { name: 'LinkedIn', cls: 'soc-li', icon: 'fa-linkedin' },
            'tiktok.com': { name: 'TikTok', cls: 'soc-tt', icon: 'fa-tiktok' },
            'youtube.com': { name: 'YouTube', cls: 'soc-yt', icon: 'fa-youtube' }
        };

        const links = Array.from(doc.querySelectorAll('a'));
        const found = new Set();
        const container = document.getElementById('socialList');
        container.innerHTML = '';

        links.forEach(link => {
            const href = link.href.toLowerCase();
            for (const [domain, info] of Object.entries(socialMap)) {
                if (href.includes(domain)) found.add(info);
            }
        });

        if (found.size === 0) {
            container.innerHTML = '<span class="text-slate-500 text-xs italic">Žiadne prepojenia.</span>';
        } else {
            found.forEach(soc => {
                container.innerHTML += `<span class="social-tag ${soc.cls}"><i class="fa-brands ${soc.icon}"></i> ${soc.name}</span>`;
            });
        }
    }

    function truncate(str, n) { return (str.length > n) ? str.substr(0, n-1) + '...' : str; }
    function formatNumber(num) { return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, " "); }

    function animateValue(obj, start, end, duration) {
        let startTimestamp = null;
        const step = (timestamp) => {
            if (!startTimestamp) startTimestamp = timestamp;
            const progress = Math.min((timestamp - startTimestamp) / duration, 1);
            obj.innerHTML = Math.floor(progress * (end - start) + start);
            if (progress < 1) window.requestAnimationFrame(step);
        };
        window.requestAnimationFrame(step);
    }
</script>

</body>
</html>